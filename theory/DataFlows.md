# Data Flow

По умолчанию стандартный поток ввода считывает данные с клавиатуры, 
а поток вывода и поток ошибок выводят данные на консоль. Однако можно,
не изменяя ни строчки кода в программе, сделать по-другому: заставить 
её считывать данные из файла и выводить в файл.

Чтобы перенаправить стандартный поток вывода программы в файл, нужно в 
командной строке написать символ `>`, а следом за ним — имя файла, в который
будут записываться выводимые данные.

Команда `program.exe > output.txt` перемещает данные от программы program.exe в файл `output.txt`.
Команда `program.exe < input.txt` перемещает данные из файла `input.txt` в программу program.exe.

## Line Streams
классы строковых потоков, объявленные в заголовочном файле `<sstream>`:
- `std::istringstream` — поток чтения из строки.
- `std::ostringstream` — поток для вывода в строку.
- `std::stringstream` — поток, который может использоваться для чтения и записи в строку.

Потоки `istringstream` и `ostringstream` можно использовать для разных целей.
Например, чтобы преобразовать строку в число и наоборот:

```c++
#include <cassert>
#include <sstream>
#include <string>

int main() {
    using namespace std::literals;
    int n;

    // Конвертируем строку в число.
    std::istringstream in{"12321"s};
    in >> n;
    assert(n == 12321);

    // Конвертируем число в строку.    
    std::ostringstream out;
    out << 112233;
    assert(out.str() == "112233"s);
}
```

## File Stream

классы, объявленные в заголовочном файле `<fstream>`:
- `std::ifstream` (англ. input file stream) — поток для чтения из файла.
- `std::ofstream` (англ. output file stream) — поток для вывода в файл.
- `std::fstream` (англ. file stream) — поток для чтения и записи данных в файл

Чтобы открыть файл и начать с ним работать, используется метод `open`. 
Он принимает два параметра - имя файла и режим открытия файла (опциональный параметр).
Когда работа с файлом завершена, его можно закрыть методом `close`.

Файловые потоки буферизируют данные, которые в них записываются. Это значит,
что поток сначала записывает данные в буфер в оперативной памяти компьютера, 
а после заполнения буфера записывает данные на диск.

```c++
#include <cassert>
#include <iostream>
#include <fstream>
#include <string>

int main() {
    using namespace std::literals;

    std::ofstream out;
    // Открываем файл filename.txt для записи и связываем его с потоком out.
    out.open("filename.txt");
    
    // Метод is_open возвращает true, если поток связан с файлом, и false — в случае ошибки.
    if (!out.is_open()) {
        std::cerr << "Failed to open file for writing" << std::endl;
        return 1;
    }
    out << "Hello!\nHow are you?\n";
    // Закрываем файл.
    out.close();

    // Открываем файл для чтения, передав его имя в конструктор.
    std::ifstream in{"filename.txt"};
    if (!in.is_open()) {
        std::cerr << "Failed to open file for reading" << std::endl;
        return 1;
    }
    std::string text;
    // Считываем данные из потока построчно в переменную text.
    for (std::string line; std::getline(in, line);) {
        text += line;
        text += '\n';
    }
    std::cout << text;
    // В std::cout будет выведено содержимое файла filename.txt.
}
```

Потоки ввода-вывода по своей природе принципиально не подвергаются
копированию. Это значит, что в функции объекты потоков передаются
по ссылке, а не по значению.
